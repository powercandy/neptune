


`Network 网络协议`


## 请求内容

---

`请求request主要包含以下内容：`

- 请求方式: method
- 路径: path
- 协议: protocol 
- 请求头部: header
- 请求体: body，出现在post方式中
--- 

`服务端响应response主要包含以下内容：`

- 协议: protocol
- 状态码: status code
- 状态信息: status message
- 响应头: header
- 响应体: body
---


## 缓存

### 浏览器缓存和代理缓存

- Cache-control头

  - no-store（没有缓存）： 缓存中不得存储任何关于客户端请求和服务端响应的内容。每次由客户端发起的请求都会下载完整的响应内容
  
  - no-cache（缓存但重新验证）：服务器验证缓存时间，如果过期则重新请求，否则服务端返回304，客户端使用本地缓存
  
  - private（私有缓存）：只应用于浏览器私有缓存，无法被中间代理缓存
  
  - public（公共缓存）：中间代理例如cdn，可以进行缓存
  
  - max-age=31536000（过期设置）：资源能被缓存的最大时间
  
  - must-revalidate（验证方式）：验证状态，通过后才会使用缓存
  
- Pragma头：通常定义Pragma: no-cache以向后兼容基于Http/1.0的客户端 ，其作用和Cache-control: no-cache相同

### 新鲜度

> 当客户端已经有缓存资源的时候，再次请求会向服务端发送If-None-Match头或者If-Modified-Since头，服务端收到后，发现资源过期了，那么会返回新的资源到客户端。如果没有过期，则返回304

### ETags

> 缓存的强校验器，一般出现在服务端的响应头中

### Vary响应

> 当缓存服务器收到一个请求，只有当前的请求和缓存的请求头跟缓存的响应头里的Vary匹配时，才能使用缓存的响应


`注意：`

如过设置Cache-control: max-age=N，那么N就代表缓存时间

如果设置Cache-control: no-cache，服务端会去查找Expires属性，通过比较Expires的值和头里面的Date属性值来判断缓存是否有效；如果没有Expires，那么则会去寻找头里面的Last-Modified信息，其计算方式就是Date值减去Last-Modified的值然后除以10


## http

> 超文本传输协议

无状态协议 - 服务器不会保留两个请求间的数据（状态），但是可以通过cookie创建一个会话来进行状态管理


## https

### 请求方式

### get

> 请求指定的资源。使用 GET 的请求应该只用于获取数据

| -- | -- |
| -- | -- |
| 请求是否有主体 | 否 |
| 成功的响应是否有主体 | 是 |
| 安全 | 是 |
| 幂等 | 是 |
| 可缓存 | 是 |
| HTML表单是否支持 | 是 |

### post

> 发送数据给服务器，请求主题的类型由content-Type决定

| -- | -- |
| -- | -- |
| 请求是否有主体 | 是 |
| 成功的响应是否有主体 | 是 |
| 安全 | 否 |
| 幂等 | 否 |
| HTML表单是否支持 | 是 |


content-Type类型：

```js
// 数据被编码成以 '&' 分隔的键-值对, 同时以 '=' 分隔键和值
application/x-www-form-urlencoded
//
multipart/form-data

// 
text/plain
// 
application/json


```

### put

> 使用请求中的负载创建或者替换目标资源

| -- | -- |
| -- | -- |
| 请求是否有主体 | 是 |
| 成功的响应是否有主体 | 否 |
| 安全 | 否 |
| 幂等 | 是 |
| 缓存 | 否 |
| HTML表单是否支持 | 否 |


### delete

### option


## 网络安全

### 点击劫持

攻击者对网页进行内容注入，引导用户点击注入的内容，从而达到窃取登录凭据或者安装恶意软件

### 跨站脚本（XSS）

攻击者恶意将客户端代码注入到网站中，让攻击者绕过访问控制并冒充用户

- 存储型xss攻击

注入的脚本永久存储至服务器端，当浏览器发送请求时，受害者会从服务器检索此恶意脚本

- 反射型xss攻击

用户点击恶意链接，提交特质表单或者浏览器恶意网站时，注入的代码会传播至易受攻击的网站

- 基于Dom的xss攻击

修改宿主客户端的原始Dom环境，payload被执行。客户端的代码执行依赖的底层环境被更改，导致执行不会按照宿主本身意愿进行。例如修改底层请求方式，进行接口拦截等其它操作

### 跨站请求伪造（CSRF）

攻击使用户的浏览器在未经用户同意或者不知情的情况下向后端执行请求

### 中间人

第三方拦截Web服务器和客户端的流量，并冒充Web服务器来捕获数据。例如我们使用的charles, whistle抓包工具，wifi助手等工具

### 会话劫持

用户与服务端验证的会话cookie会被恶意攻击者获取，通过该会话cookie冒充该用户来与服务端交互